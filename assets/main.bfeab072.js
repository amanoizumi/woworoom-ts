import{a as b,b as v,m as C,c as R,s as A,d as D,e as $,S as q}from"./utilities.d5c7cdaa.js";const k=()=>b.get(`${v}/customer/${C}/products`),I=()=>b.get(`${v}/customer/${C}/carts`),_=s=>b.post(`${v}/customer/${C}/carts`,s),H=s=>b.delete(`${v}/customer/${C}/carts/${s}`),U=()=>b.delete(`${v}/customer/${C}/carts`),G=s=>b.patch(`${v}/customer/${C}/carts`,s),K=s=>b.post(`${v}/customer/${C}/orders`,s);var B={exports:{}};/*!
 * validate.js 0.13.1
 *
 * (c) 2013-2019 Nicklas Ansman, 2013 Wrapp
 * Validate.js may be freely distributed under the MIT license.
 * For all details and documentation:
 * http://validatejs.org/
 */(function(s,f){(function(d,m,p){var h=function(e,t,n){n=r.extend({},r.options,n);var a=r.runValidations(e,t,n);if(a.some(function(u){return r.isPromise(u.error)}))throw new Error("Use validate.async if you want support for promises");return h.processValidationResults(a,n)},r=h;r.extend=function(e){return[].slice.call(arguments,1).forEach(function(t){for(var n in t)e[n]=t[n]}),e},r.extend(h,{version:{major:0,minor:13,patch:1,metadata:null,toString:function(){var e=r.format("%{major}.%{minor}.%{patch}",r.version);return r.isEmpty(r.version.metadata)||(e+="+"+r.version.metadata),e}},Promise:typeof Promise<"u"?Promise:null,EMPTY_STRING_REGEXP:/^\s*$/,runValidations:function(e,t,n){var a=[],u,i,c,o,l,g,y;(r.isDomElement(e)||r.isJqueryElement(e))&&(e=r.collectFormValues(e));for(u in t){c=r.getDeepObjectValue(e,u),o=r.result(t[u],c,e,u,n,t);for(i in o){if(l=r.validators[i],!l)throw y=r.format("Unknown validator %{name}",{name:i}),new Error(y);g=o[i],g=r.result(g,c,e,u,n,t),g&&a.push({attribute:u,value:c,validator:i,globalOptions:n,attributes:e,options:g,error:l.call(l,c,g,u,e,n)})}}return a},processValidationResults:function(e,t){e=r.pruneEmptyErrors(e,t),e=r.expandMultipleErrors(e,t),e=r.convertErrorMessages(e,t);var n=t.format||"grouped";if(typeof r.formatters[n]=="function")e=r.formatters[n](e);else throw new Error(r.format("Unknown format %{format}",t));return r.isEmpty(e)?void 0:e},async:function(e,t,n){n=r.extend({},r.async.options,n);var a=n.wrapErrors||function(i){return i};n.cleanAttributes!==!1&&(e=r.cleanAttributes(e,t));var u=r.runValidations(e,t,n);return new r.Promise(function(i,c){r.waitForResults(u).then(function(){var o=r.processValidationResults(u,n);o?c(new a(o,n,e,t)):i(e)},function(o){c(o)})})},single:function(e,t,n){return n=r.extend({},r.single.options,n,{format:"flat",fullMessages:!1}),r({single:e},{single:t},n)},waitForResults:function(e){return e.reduce(function(t,n){return r.isPromise(n.error)?t.then(function(){return n.error.then(function(a){n.error=a||null})}):t},new r.Promise(function(t){t()}))},result:function(e){var t=[].slice.call(arguments,1);return typeof e=="function"&&(e=e.apply(null,t)),e},isNumber:function(e){return typeof e=="number"&&!isNaN(e)},isFunction:function(e){return typeof e=="function"},isInteger:function(e){return r.isNumber(e)&&e%1===0},isBoolean:function(e){return typeof e=="boolean"},isObject:function(e){return e===Object(e)},isDate:function(e){return e instanceof Date},isDefined:function(e){return e!=null},isPromise:function(e){return!!e&&r.isFunction(e.then)},isJqueryElement:function(e){return e&&r.isString(e.jquery)},isDomElement:function(e){return!e||!e.querySelectorAll||!e.querySelector?!1:r.isObject(document)&&e===document?!0:typeof HTMLElement=="object"?e instanceof HTMLElement:e&&typeof e=="object"&&e!==null&&e.nodeType===1&&typeof e.nodeName=="string"},isEmpty:function(e){var t;if(!r.isDefined(e))return!0;if(r.isFunction(e))return!1;if(r.isString(e))return r.EMPTY_STRING_REGEXP.test(e);if(r.isArray(e))return e.length===0;if(r.isDate(e))return!1;if(r.isObject(e)){for(t in e)return!1;return!0}return!1},format:r.extend(function(e,t){return r.isString(e)?e.replace(r.format.FORMAT_REGEXP,function(n,a,u){return a==="%"?"%{"+u+"}":String(t[u])}):e},{FORMAT_REGEXP:/(%?)%\{([^\}]+)\}/g}),prettify:function(e){return r.isNumber(e)?e*100%1===0?""+e:parseFloat(Math.round(e*100)/100).toFixed(2):r.isArray(e)?e.map(function(t){return r.prettify(t)}).join(", "):r.isObject(e)?r.isDefined(e.toString)?e.toString():JSON.stringify(e):(e=""+e,e.replace(/([^\s])\.([^\s])/g,"$1 $2").replace(/\\+/g,"").replace(/[_-]/g," ").replace(/([a-z])([A-Z])/g,function(t,n,a){return""+n+" "+a.toLowerCase()}).toLowerCase())},stringifyValue:function(e,t){var n=t&&t.prettify||r.prettify;return n(e)},isString:function(e){return typeof e=="string"},isArray:function(e){return{}.toString.call(e)==="[object Array]"},isHash:function(e){return r.isObject(e)&&!r.isArray(e)&&!r.isFunction(e)},contains:function(e,t){return r.isDefined(e)?r.isArray(e)?e.indexOf(t)!==-1:t in e:!1},unique:function(e){return r.isArray(e)?e.filter(function(t,n,a){return a.indexOf(t)==n}):e},forEachKeyInKeypath:function(e,t,n){if(!!r.isString(t)){var a="",u,i=!1;for(u=0;u<t.length;++u)switch(t[u]){case".":i?(i=!1,a+="."):(e=n(e,a,!1),a="");break;case"\\":i?(i=!1,a+="\\"):i=!0;break;default:i=!1,a+=t[u];break}return n(e,a,!0)}},getDeepObjectValue:function(e,t){if(!!r.isObject(e))return r.forEachKeyInKeypath(e,t,function(n,a){if(r.isObject(n))return n[a]})},collectFormValues:function(e,t){var n={},a,u,i,c,o,l;if(r.isJqueryElement(e)&&(e=e[0]),!e)return n;for(t=t||{},c=e.querySelectorAll("input[name], textarea[name]"),a=0;a<c.length;++a)if(i=c.item(a),!r.isDefined(i.getAttribute("data-ignored"))){var g=i.name.replace(/\./g,"\\\\.");l=r.sanitizeFormValue(i.value,t),i.type==="number"?l=l?+l:null:i.type==="checkbox"?i.attributes.value?i.checked||(l=n[g]||null):l=i.checked:i.type==="radio"&&(i.checked||(l=n[g]||null)),n[g]=l}for(c=e.querySelectorAll("select[name]"),a=0;a<c.length;++a)if(i=c.item(a),!r.isDefined(i.getAttribute("data-ignored"))){if(i.multiple){l=[];for(u in i.options)o=i.options[u],o&&o.selected&&l.push(r.sanitizeFormValue(o.value,t))}else{var y=typeof i.options[i.selectedIndex]<"u"?i.options[i.selectedIndex].value:"";l=r.sanitizeFormValue(y,t)}n[i.name]=l}return n},sanitizeFormValue:function(e,t){return t.trim&&r.isString(e)&&(e=e.trim()),t.nullify!==!1&&e===""?null:e},capitalize:function(e){return r.isString(e)?e[0].toUpperCase()+e.slice(1):e},pruneEmptyErrors:function(e){return e.filter(function(t){return!r.isEmpty(t.error)})},expandMultipleErrors:function(e){var t=[];return e.forEach(function(n){r.isArray(n.error)?n.error.forEach(function(a){t.push(r.extend({},n,{error:a}))}):t.push(n)}),t},convertErrorMessages:function(e,t){t=t||{};var n=[],a=t.prettify||r.prettify;return e.forEach(function(u){var i=r.result(u.error,u.value,u.attribute,u.options,u.attributes,u.globalOptions);if(!r.isString(i)){n.push(u);return}i[0]==="^"?i=i.slice(1):t.fullMessages!==!1&&(i=r.capitalize(a(u.attribute))+" "+i),i=i.replace(/\\\^/g,"^"),i=r.format(i,{value:r.stringifyValue(u.value,t)}),n.push(r.extend({},u,{error:i}))}),n},groupErrorsByAttribute:function(e){var t={};return e.forEach(function(n){var a=t[n.attribute];a?a.push(n):t[n.attribute]=[n]}),t},flattenErrorsToArray:function(e){return e.map(function(t){return t.error}).filter(function(t,n,a){return a.indexOf(t)===n})},cleanAttributes:function(e,t){function n(i,c,o){return r.isObject(i[c])?i[c]:i[c]=o?!0:{}}function a(i){var c={},o;for(o in i)!i[o]||r.forEachKeyInKeypath(c,o,n);return c}function u(i,c){if(!r.isObject(i))return i;var o=r.extend({},i),l,g;for(g in i)l=c[g],r.isObject(l)?o[g]=u(o[g],l):l||delete o[g];return o}return!r.isObject(t)||!r.isObject(e)?{}:(t=a(t),u(e,t))},exposeModule:function(e,t,n,a,u){n?(a&&a.exports&&(n=a.exports=e),n.validate=e):(t.validate=e,e.isFunction(u)&&u.amd&&u([],function(){return e}))},warn:function(e){typeof console<"u"&&console.warn&&console.warn("[validate.js] "+e)},error:function(e){typeof console<"u"&&console.error&&console.error("[validate.js] "+e)}}),h.validators={presence:function(e,t){if(t=r.extend({},this.options,t),t.allowEmpty!==!1?!r.isDefined(e):r.isEmpty(e))return t.message||this.message||"can't be blank"},length:function(e,t,n){if(!!r.isDefined(e)){t=r.extend({},this.options,t);var a=t.is,u=t.maximum,i=t.minimum,c=t.tokenizer||function(y){return y},o,l=[];e=c(e);var g=e.length;if(!r.isNumber(g))return t.message||this.notValid||"has an incorrect length";if(r.isNumber(a)&&g!==a&&(o=t.wrongLength||this.wrongLength||"is the wrong length (should be %{count} characters)",l.push(r.format(o,{count:a}))),r.isNumber(i)&&g<i&&(o=t.tooShort||this.tooShort||"is too short (minimum is %{count} characters)",l.push(r.format(o,{count:i}))),r.isNumber(u)&&g>u&&(o=t.tooLong||this.tooLong||"is too long (maximum is %{count} characters)",l.push(r.format(o,{count:u}))),l.length>0)return t.message||l}},numericality:function(e,t,n,a,u){if(!!r.isDefined(e)){t=r.extend({},this.options,t);var i=[],c,o,l={greaterThan:function(E,F){return E>F},greaterThanOrEqualTo:function(E,F){return E>=F},equalTo:function(E,F){return E===F},lessThan:function(E,F){return E<F},lessThanOrEqualTo:function(E,F){return E<=F},divisibleBy:function(E,F){return E%F===0}},g=t.prettify||u&&u.prettify||r.prettify;if(r.isString(e)&&t.strict){var y="^-?(0|[1-9]\\d*)";if(t.onlyInteger||(y+="(\\.\\d+)?"),y+="$",!new RegExp(y).test(e))return t.message||t.notValid||this.notValid||this.message||"must be a valid number"}if(t.noStrings!==!0&&r.isString(e)&&!r.isEmpty(e)&&(e=+e),!r.isNumber(e))return t.message||t.notValid||this.notValid||this.message||"is not a number";if(t.onlyInteger&&!r.isInteger(e))return t.message||t.notInteger||this.notInteger||this.message||"must be an integer";for(c in l)if(o=t[c],r.isNumber(o)&&!l[c](e,o)){var T="not"+r.capitalize(c),M=t[T]||this[T]||this.message||"must be %{type} %{count}";i.push(r.format(M,{count:o,type:g(c)}))}if(t.odd&&e%2!==1&&i.push(t.notOdd||this.notOdd||this.message||"must be odd"),t.even&&e%2!==0&&i.push(t.notEven||this.notEven||this.message||"must be even"),i.length)return t.message||i}},datetime:r.extend(function(e,t){if(!r.isFunction(this.parse)||!r.isFunction(this.format))throw new Error("Both the parse and format functions needs to be set to use the datetime/date validator");if(!!r.isDefined(e)){t=r.extend({},this.options,t);var n,a=[],u=t.earliest?this.parse(t.earliest,t):NaN,i=t.latest?this.parse(t.latest,t):NaN;if(e=this.parse(e,t),isNaN(e)||t.dateOnly&&e%864e5!==0)return n=t.notValid||t.message||this.notValid||"must be a valid date",r.format(n,{value:arguments[0]});if(!isNaN(u)&&e<u&&(n=t.tooEarly||t.message||this.tooEarly||"must be no earlier than %{date}",n=r.format(n,{value:this.format(e,t),date:this.format(u,t)}),a.push(n)),!isNaN(i)&&e>i&&(n=t.tooLate||t.message||this.tooLate||"must be no later than %{date}",n=r.format(n,{date:this.format(i,t),value:this.format(e,t)}),a.push(n)),a.length)return r.unique(a)}},{parse:null,format:null}),date:function(e,t){return t=r.extend({},t,{dateOnly:!0}),r.validators.datetime.call(r.validators.datetime,e,t)},format:function(e,t){(r.isString(t)||t instanceof RegExp)&&(t={pattern:t}),t=r.extend({},this.options,t);var n=t.message||this.message||"is invalid",a=t.pattern,u;if(!!r.isDefined(e)&&(!r.isString(e)||(r.isString(a)&&(a=new RegExp(t.pattern,t.flags)),u=a.exec(e),!u||u[0].length!=e.length)))return n},inclusion:function(e,t){if(!!r.isDefined(e)&&(r.isArray(t)&&(t={within:t}),t=r.extend({},this.options,t),!r.contains(t.within,e))){var n=t.message||this.message||"^%{value} is not included in the list";return r.format(n,{value:e})}},exclusion:function(e,t){if(!!r.isDefined(e)&&(r.isArray(t)&&(t={within:t}),t=r.extend({},this.options,t),!!r.contains(t.within,e))){var n=t.message||this.message||"^%{value} is restricted";return r.isString(t.within[e])&&(e=t.within[e]),r.format(n,{value:e})}},email:r.extend(function(e,t){t=r.extend({},this.options,t);var n=t.message||this.message||"is not a valid email";if(!!r.isDefined(e)&&(!r.isString(e)||!this.PATTERN.exec(e)))return n},{PATTERN:/^(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])$/i}),equality:function(e,t,n,a,u){if(!!r.isDefined(e)){r.isString(t)&&(t={attribute:t}),t=r.extend({},this.options,t);var i=t.message||this.message||"is not equal to %{attribute}";if(r.isEmpty(t.attribute)||!r.isString(t.attribute))throw new Error("The attribute must be a non empty string");var c=r.getDeepObjectValue(a,t.attribute),o=t.comparator||function(g,y){return g===y},l=t.prettify||u&&u.prettify||r.prettify;if(!o(e,c,t,n,a))return r.format(i,{attribute:l(t.attribute)})}},url:function(e,t){if(!!r.isDefined(e)){t=r.extend({},this.options,t);var n=t.message||this.message||"is not a valid url",a=t.schemes||this.schemes||["http","https"],u=t.allowLocal||this.allowLocal||!1,i=t.allowDataUrl||this.allowDataUrl||!1;if(!r.isString(e))return n;var c="^(?:(?:"+a.join("|")+")://)(?:\\S+(?::\\S*)?@)?(?:",o="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))";if(u?o+="?":c+="(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})",c+="(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*"+o+")(?::\\d{2,5})?(?:[/?#]\\S*)?$",i){var l="\\w+\\/[-+.\\w]+(?:;[\\w=]+)*",g="[A-Za-z0-9-_.!~\\*'();\\/?:@&=+$,%]*",y="data:(?:"+l+")?(?:;base64)?,"+g;c="(?:"+c+")|(?:^"+y+"$)"}var T=new RegExp(c,"i");if(!T.exec(e))return n}},type:r.extend(function(e,t,n,a,u){if(r.isString(t)&&(t={type:t}),!!r.isDefined(e)){var i=r.extend({},this.options,t),c=i.type;if(!r.isDefined(c))throw new Error("No type was specified");var o;if(r.isFunction(c)?o=c:o=this.types[c],!r.isFunction(o))throw new Error("validate.validators.type.types."+c+" must be a function.");if(!o(e,i,n,a,u)){var l=t.message||this.messages[c]||this.message||i.message||(r.isFunction(c)?"must be of the correct type":"must be of type %{type}");return r.isFunction(l)&&(l=l(e,t,n,a,u)),r.format(l,{attribute:r.prettify(n),type:c})}}},{types:{object:function(e){return r.isObject(e)&&!r.isArray(e)},array:r.isArray,integer:r.isInteger,number:r.isNumber,string:r.isString,date:r.isDate,boolean:r.isBoolean},messages:{}})},h.formatters={detailed:function(e){return e},flat:r.flattenErrorsToArray,grouped:function(e){var t;e=r.groupErrorsByAttribute(e);for(t in e)e[t]=r.flattenErrorsToArray(e[t]);return e},constraint:function(e){var t;e=r.groupErrorsByAttribute(e);for(t in e)e[t]=e[t].map(function(n){return n.validator}).sort();return e}},h.exposeModule(h,this,d,m,p)}).call(R,f,s,null)})(B,B.exports);const X=B.exports;(function(){document.addEventListener("DOMContentLoaded",function(){const h=document.querySelector(".recommendation-wall");if(!h)return;h.style.cursor="grab";let r={top:0,left:0,x:0,y:0};const e=function(a){h.style.cursor="grabbing",h.style.userSelect="none",r={left:h.scrollLeft,top:h.scrollTop,x:a.clientX,y:a.clientY},document.addEventListener("mousemove",t),document.addEventListener("mouseup",n)},t=function(a){const u=a.clientX-r.x,i=a.clientY-r.y;h.scrollTop=r.top-i,h.scrollLeft=r.left-u},n=function(){h.style.cursor="grab",h.style.removeProperty("user-select"),document.removeEventListener("mousemove",t),document.removeEventListener("mouseup",n)};h.addEventListener("mousedown",e)});const s=document.querySelector(".menuToggle"),f=document.querySelectorAll(".topBar-menu a"),d=document.querySelector(".topBar-menu");s&&s.addEventListener("click",m),f.forEach(h=>{h.addEventListener("click",p)});function m(){!d||(d.classList.contains("openMenu")?d.classList.remove("openMenu"):d.classList.add("openMenu"))}function p(){!d||d.classList.remove("openMenu")}})();const W=document.querySelector(".productSelect"),z=document.querySelector(".productWrap"),P=document.querySelector(".shoppingCart"),w=document.querySelectorAll("#orderForm input[type=text],#orderForm input[type=tel],#orderForm input[type=email],#orderForm select"),O=document.querySelector(".orderInfo-form"),J=document.querySelector(".orderInfo-btn"),Y={\u59D3\u540D:{presence:{message:"\u5FC5\u586B\uFF01",allowEmpty:!1}},\u96FB\u8A71:{presence:{message:"\u5FC5\u586B\uFF01"},format:{pattern:"^09[0-9]{8}$",message:"\u9700\u7B26\u5408\u624B\u6A5F\u7684\u683C\u5F0F\uFF01"}},Email:{presence:{message:"\u5FC5\u586B\uFF01"},email:{message:"\u9700\u7B26\u5408\u96FB\u5B50\u4FE1\u7BB1\u7684\u683C\u5F0F\uFF01"}},\u5BC4\u9001\u5730\u5740:{presence:{message:"\u5FC5\u586B\uFF01",allowEmpty:!1}},\u4EA4\u6613\u65B9\u5F0F:{presence:{message:"\u5FC5\u586B\uFF01",allowEmpty:!1}}};let j=[],x={carts:[],finalTotal:0},N=!1;const Q=()=>{Z(),te()},Z=()=>{k().then(s=>{var d;j=(d=s.data.products)!=null?d:s.data,L()}).catch(s=>{A(s)})},ee=s=>{const f=s.target.value;if(f==="\u5168\u90E8")L();else{const d=j.filter(m=>m.category===f);L(d)}};W.addEventListener("change",ee);const L=(s=j)=>{let f="";s.forEach(d=>{f+=`<li class="productCard">
    <h4 class="productType">\u65B0\u54C1</h4>
    <img
      src="${d.images}"
      alt="${d.title}"
    />
    <a href="#" class="addCardBtn" data-id="${d.id}">\u52A0\u5165\u8CFC\u7269\u8ECA</a>
    <h3>${d.title}</h3>
    <del class="originPrice">NT${D(d.origin_price)}</del>
    <p class="nowPrice">NT${D(d.price)}</p>
  </li>`}),z.innerHTML=f},te=()=>{I().then(s=>{x=s.data,S()}).catch(s=>{A(s)})},re=s=>{s.preventDefault();const f=s.target;if(f.nodeName!=="A")return;const{id:d}=f.dataset;let m=!0;x.carts.forEach(p=>{p.product.id===d&&(m=!1)}),m?_({data:{productId:d,quantity:1}}).then(h=>{x=h.data,S(),$("\u6210\u529F\u52A0\u5165\u5546\u54C1\u81F3\u8CFC\u7269\u8ECA\uFF01")}).catch(h=>{A(h)}):q.fire({title:"\u8CFC\u7269\u8ECA\u5167\u5DF2\u6709\u8A72\u5546\u54C1\uFF01",icon:"warning"})};z.addEventListener("click",re);const S=(s=x)=>{if(s.carts.length>0){let f="";s.carts.forEach(m=>{f+=`
      <tr>
      <td>
        <div class="cardItem-title">
          <img src="${m.product.images}" alt="" />
          <p>${m.product.title}</p>
        </div>
      </td>
      <td>NT${D(m.product.price)}</td>

      <td>
        <div class="addRemoveBtn">
          <button type="button" ${m.quantity===1?"disabled":""} class="cart-btn ${m.quantity===1?"":"hover"} material-icons" data-js="remove" data-id="${m.id}"> remove </button>
          ${m.quantity}
          <button type="button" class="cart-btn hover material-icons" data-js="add" data-id="${m.id}"> add </button>
        </div>
      </td>

      <td>NT${D(m.product.price*m.quantity)}</td>
      <td class="discardBtn">
        <a href="#" class="material-icons" data-js="deleteItem" data-id="${m.id}"> clear </a>
      </td>
    </tr>`}),P.innerHTML=ne(f,s.finalTotal),document.querySelector(".shoppingCart-table").addEventListener("click",ie)}else s.carts.length===0&&(P.innerHTML='<h3 class="noneitem">\u8CFC\u7269\u8ECA\u73FE\u5728\u6C92\u6709\u6771\u897F~\u8D95\u5FEB\u53BB\u8CFC\u7269\u5427\uFF01</h3>')},ne=(s,f)=>` <h3 class="section-title">\u6211\u7684\u8CFC\u7269\u8ECA</h3>
  <div class="overflowWrap">
    <table class="shoppingCart-table">
      <thead>
        <tr>
          <th width="40%">\u54C1\u9805</th>
          <th width="15%">\u55AE\u50F9</th>
          <th width="15%">\u6578\u91CF</th>
          <th width="15%">\u91D1\u984D</th>
          <th width="15%"></th>
        </tr>
      </thead>
      <tbody>
      ${s}
      </tbody>
      <tfoot>
        <tr>
          <td>
            <a href="#" class="discardAllBtn"  data-js="deleteAllCarts">\u522A\u9664\u6240\u6709\u54C1\u9805</a>
          </td>
          <td></td>
          <td></td>
          <td>
            <p>\u7E3D\u91D1\u984D</p>
          </td>
          <td>NT${D(f)}</td>
        </tr>
      </tfoot>
    </table>
  </div>`,ie=s=>{s.preventDefault();const f=s.target.dataset.js;if(f!==void 0){if(f==="deleteAllCarts")ae();else if(f==="deleteItem"){const{id:d}=s.target.dataset;ue(d)}else if(f==="add"||f==="remove"){const{id:d}=s.target.dataset;fe(d,f)}}},ae=()=>{q.fire({title:"\u78BA\u5B9A\u8981\u6E05\u7A7A\u8CFC\u7269\u8ECA\u55CE\uFF1F",confirmButtonColor:"#6A33F8",confirmButtonText:"\u78BA\u8A8D",cancelButtonText:"\u53D6\u6D88",showCancelButton:!0,icon:"warning"}).then(s=>{s.isConfirmed&&U().then(f=>{x=f.data,S(),$("\u5DF2\u6E05\u7A7A\u8CFC\u7269\u8ECA\uFF01")}).catch(f=>{A(f)})})},ue=s=>{H(s).then(f=>{x=f.data,S()}).catch(f=>{A(f)})},se=s=>x.carts.find(f=>f.id===s),ce=(s,f)=>{G({data:{id:s,quantity:f}}).then(m=>{x=m.data,S(),$("\u6210\u529F\u66F4\u6539\u8CFC\u7269\u8ECA\u7522\u54C1\u6578\u91CF\uFF01")}).catch(m=>{A(m)})},fe=(s,f)=>{const d=se(s);if(!d)return;const m=f==="add"?1:-1,p=d.quantity+m;p<1||ce(s,p)},V=()=>{let s=[...w];s.pop(),s.forEach(d=>{d.nextElementSibling.textContent=""});const f=X(O,Y);if(f){const d=Object.keys(f),m=Object.values(f);d.forEach((p,h)=>{const r=document.querySelector(`[data-message="${p}"]`);r.textContent=m[h]}),N=!1}else N=!0};O.addEventListener("change",V);const oe=()=>{if(!N){V();return}if(x.carts.length===0){q.fire({title:"\u8CFC\u7269\u8ECA\u5167\u76EE\u524D\u6C92\u6709\u5546\u54C1\u5594\uFF01",icon:"warning",confirmButtonText:"\u78BA\u5B9A"});return}const s={data:{user:{name:w[0].value.trim(),tel:w[1].value.trim(),email:w[2].value.trim(),address:w[3].value.trim(),payment:w[4].value}}};K(s).then(f=>{$("\u6210\u529F\u9001\u51FA\u8A02\u55AE"),O.reset(),x={carts:[],finalTotal:0},S()}).catch(f=>{A(f)})};J.addEventListener("click",oe);Q();
